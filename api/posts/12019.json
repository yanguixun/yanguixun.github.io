{"title":"网易云音乐歌单 JS 音乐播放器 JS 代码","slug":"网易云音乐歌单JS音乐播放器JS代码","date":"2019-01-17","updated":"2019-01-17","comments":true,"path":"api/posts/12019.json","excerpt":"<p>网易云音乐歌单 JS 音乐播放器 JS 代码<br>感谢 <a href=\"//github.com/messoer/mess-api-doc\" target=\"_blank\" rel=\"noopener\">MessAPI</a> 提供的网易云音乐 API<br>代码依赖 jQuery 和 fontawesome</p>","cover":"/gallery/yaoplayer-0.jpg","covers":["/gallery/yaoplayer-0.jpg"],"content":"<p><img src=\"/gallery/yaoplayer-0.jpg\" alt=\"JS 音乐播放器截图\"><br>\n网易云音乐歌单 JS 音乐播放器 JS 代码<br>\n感谢 <a href=\"//github.com/messoer/mess-api-doc\" target=\"_blank\" rel=\"noopener\">MessAPI</a> 提供的网易云音乐 API<br>\n代码依赖 jQuery 和 fontawesome</p>\n<a id=\"more\"></a>\n<h2 id=\"使用方法\"><a class=\"headerlink\" href=\"# 使用方法\"></a>使用方法</h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.<span class=\"keyword\">get</span>('https://v1.itooi.cn/netease/songList', &#123;</span><br><span class=\"line\">\t<span class=\"string\">'id'</span>: <span class=\"number\">998389130</span> <span class=\"comment\">// 此处歌单 ID</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">json</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (json.data != <span class=\"literal\">undefined</span> &amp;&amp; json.data != <span class=\"literal\">null</span> &amp;&amp;</span><br><span class=\"line\">\t\tjson.data.tracks != <span class=\"literal\">undefined</span> &amp;&amp; json.data.tracks != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">\t\t$(<span class=\"string\">'body'</span>).append(<span class=\"keyword\">new</span> YaoPlayer(<span class=\"string\">'YaoPlayer'</span>, json.data.tracks.map(<span class=\"function\"><span class=\"params\">song</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">'name'</span>: song.name,</span><br><span class=\"line\">        <span class=\"string\">'singer'</span>: song.artists.map(<span class=\"function\"><span class=\"params\">artist</span> =&gt;</span> artist.name).join(<span class=\"string\">','</span>),</span><br><span class=\"line\">        <span class=\"string\">'lrc'</span>: <span class=\"string\">'Not found'</span>,</span><br><span class=\"line\">        <span class=\"string\">'pic'</span>: song.album.picUrl,</span><br><span class=\"line\">        <span class=\"string\">'url'</span>: <span class=\"string\">`https://v1.itooi.cn/netease/url?id=<span class=\"subst\">$&#123;song.id&#125;</span>&amp;quality=128`</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;)));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;, <span class=\"string\">'json'</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"插件全代码\"><a class=\"headerlink\" href=\"# 插件全代码\"></a>插件全代码</h2>\n<figure class=\"highlight javascript\"><figcaption><span>yaoplayer.js</span><a href=\"/code/yaoplayer.js\">view raw</a></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* Based on jQuery, fontawesome</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">window, document</span>) </span>{</span><br><span class=\"line\">  <span class=\"keyword\">var</span> _player = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">id, playlist</span>) </span>{</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (playlist == <span class=\"literal\">undefined</span> || playlist == <span class=\"literal\">null</span> || playlist.length &lt; <span class=\"number\">1</span>) {</span><br><span class=\"line\">      <span class=\"comment\">/** sample</span></span><br><span class=\"line\"><span class=\"comment\">      playlist = [</span></span><br><span class=\"line\"><span class=\"comment\">        {</span></span><br><span class=\"line\"><span class=\"comment\">          'name': 'Test',</span></span><br><span class=\"line\"><span class=\"comment\">          'singer': 'Tester',</span></span><br><span class=\"line\"><span class=\"comment\">          'lrc': 'Not found',</span></span><br><span class=\"line\"><span class=\"comment\">          'pic': 'https://s.gravatar.com/avatar/91c1b1d830c2daab93ac478c9852c2c8?s=72',</span></span><br><span class=\"line\"><span class=\"comment\">          'url': 'test.mp3'</span></span><br><span class=\"line\"><span class=\"comment\">        }</span></span><br><span class=\"line\"><span class=\"comment\">      ]</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> audio = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'audio'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Layout\t\t</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> $outer = $(<span class=\"string\">'&lt;div&gt;&lt;/div&gt;'</span>).css({</span><br><span class=\"line\">      <span class=\"string\">'position'</span>: <span class=\"string\">'fixed'</span>,</span><br><span class=\"line\">      <span class=\"string\">'right'</span>: <span class=\"string\">'-208px'</span>,</span><br><span class=\"line\">      <span class=\"string\">'top'</span>: <span class=\"string\">'56px'</span>,</span><br><span class=\"line\">      <span class=\"string\">'box-shadow'</span>: <span class=\"string\">'0 0 1px grey'</span>,</span><br><span class=\"line\">      <span class=\"string\">'width'</span>: <span class=\"string\">'280px'</span>,</span><br><span class=\"line\">      <span class=\"string\">'background-color'</span>: <span class=\"string\">'white'</span></span><br><span class=\"line\">    }).attr(<span class=\"string\">'id'</span>, id);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> $coverButton = <span class=\"keyword\">this</span>.Component.CoverButton();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $prevButton = <span class=\"keyword\">this</span>.Component.ControlButton({</span><br><span class=\"line\">      <span class=\"string\">'icon'</span>: <span class=\"string\">'&lt;i class=\"fas fa-angle-left\"&gt;&lt;/i&gt;'</span></span><br><span class=\"line\">    });</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $playButton = <span class=\"keyword\">this</span>.Component.CustomPlayControlButton();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $nextButton = <span class=\"keyword\">this</span>.Component.ControlButton({</span><br><span class=\"line\">      <span class=\"string\">'icon'</span>: <span class=\"string\">'&lt;i class=\"fas fa-angle-right\"&gt;&lt;/i&gt;'</span></span><br><span class=\"line\">    });</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $listButton = <span class=\"keyword\">this</span>.Component.ControlButton({</span><br><span class=\"line\">      <span class=\"string\">'icon'</span>: <span class=\"string\">'&lt;i class=\"fas fa-list\"&gt;&lt;/i&gt;'</span></span><br><span class=\"line\">    });</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $lyricButton = <span class=\"keyword\">this</span>.Component.ControlButton({</span><br><span class=\"line\">      <span class=\"string\">'icon'</span>: <span class=\"string\">'&lt;i class=\"fas fa-align-center\"&gt;&lt;/i&gt;'</span></span><br><span class=\"line\">    });</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $modeButton = <span class=\"keyword\">this</span>.Component.CustomModeControlButton();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $songInfo = <span class=\"keyword\">this</span>.Component.SongInfo();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $progressBar = <span class=\"keyword\">this</span>.Component.ProgressBar();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $progressLabel = <span class=\"keyword\">this</span>.Component.ProgressLabel();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $lyricView = <span class=\"keyword\">this</span>.Component.LyricView();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $volumeButton = <span class=\"keyword\">this</span>.Component.CustomVolumeControlButton(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">volume</span>) </span>{<span class=\"comment\">// interface</span></span><br><span class=\"line\">      audio.volume = volume;</span><br><span class=\"line\">    });</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $listView = <span class=\"keyword\">this</span>.Component.ListView(playlist);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $extra = <span class=\"keyword\">this</span>.Component.InOut();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>","url":"/posts/12019/","min2read":2,"word4post":344,"prev_post":{"title":"旧版日记仿 markdown 编译代码","url":"/posts/51385/"},"next_post":{"title":"测试区 2048JS 代码","url":"/posts/218/"},"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"使用方法\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">使用方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"插件全代码\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">插件全代码</span></a></li></ol>","categories":[{"name":"Blog","path":"api/categories/Blog.json","url":"/categories/Blog/"},{"name":"Plugin","path":"api/categories/Plugin.json","url":"/categories/Blog/Plugin/"}],"tags":[{"name":"音乐播放器","path":"api/tags/音乐播放器.json","url":"/tags/音乐播放器/"},{"name":"JavaScript","path":"api/tags/JavaScript.json","url":"/tags/JavaScript/"}]}